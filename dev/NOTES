----------------------------------------------------------------------------
14 September 2012 09:00

Create a body viewer. A simple paper doll. Bind the body to a template image
for the paper doll, with a descriptor of slot locations in the image.

Or, just a list of slots:

Head: [icon] Helm {stats}
Right Hand: [icon] Sword {stats}
Left Hand: <empty>

Make it full screen.

Could make a generic grid viewer.

----------------------------------------------------------------------------
11 September 2012 23:32

Pathfinding and an NPC follower all working. Need an inventory UI. A bit
worried that the rule system, controller and gui interactions are not clean
enough. Should consider consolidating exception classes into one module. Maybe
revisit control flow, map it out and see if the right modules are handling the
right part of the sequence.

The base objects are mostly just containers. The rule system should define all
legal interactions. The executor should handle transactions and recovery on
rule violations (while bubbling the violations up). The controller should tell
objects what to attempt to do, expecting the executor to reject some attempts;
but meanwhile trying to predict what is possible. That's the part that bothers
me: both controller and executor need to query the rule system, which seems
redundant. But the controller cannot predict all problems with its choices,
since it is operating under intentionally limited information (neither the
player nor the AIs should be omniscient). So maybe that's unavoidable.

----------------------------------------------------------------------------
06 September 2012 06:13

pygame-specifics move up to SessionViewer. The player.Controller pushes itself
as the current controller and runs resume. It implements specific functions,
not general event handling.

SessionViewer.on_event maps events to controller commands and invokes them,
using the key binding table to guide the mapping. In the future it will
dispatch events to sub-widgets other than the controller.

Refactor Player:
* move on_event to SessionViewer
* move on_keypress to SessionViewer

Refactor SessionViewer:
* remove event_handlers
* set controller in run
* in on_keypress, invoke controller (if any)

Then, in on_mouse, translate coords to map and use it to teleport the player.

----------------------------------------------------------------------------
04 September 2012 08:39

Make container module. Move slots and body there. Move Bags and Trays from
obj/__init__.py to their own files there. Fix tests.

----------------------------------------------------------------------------
03 September 2012 16:13

When I change passability rules I have to reload the session. Not good. The
saved session should pick up this rule change automatically. Passability is a
game or at least a scenario-level rule.

Added libtcod for FOV. It comes in a tarball with a non-standard build system
and compiled libraries. A copy of libtcod.so must be placed where libtcodpy.py
can find it (typically the same dir as the executable). I don't like this and
am tempted to duplicate the raytracing code into a python C module.

----------------------------------------------------------------------------
02 September 2012 19:00

If the saved maps refer to terrains as objects then the objects must be saved
in the same pickle file. If those in turn refer to sprites then those must be
saved as well, and they will refer to images, so that's bust. Yes, sprites
currently allocate images in their ctors.

Currenty the saved map refers to terrain classes and I patch these with
sprites at runtime. That works ok. Python is the scripting language, so why
not? In the newer code I see I was trying to do terrain as objects allocated
from a json spec. But I think I would prefer doing it in classes for power even
if there were no other reason.


----------------------------------------------------------------------------
30 August 2012 22:47

Cleaned up repo and made it private on github.

Goal:
* Show a guy walking around on a map.
